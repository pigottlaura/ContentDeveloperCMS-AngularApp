<ng-container *ngIf="_projectId == null && _userAccessLevel == null">
    <app-user-projects
        (viewProject)="viewProject($event)"
        (viewLoginRequired)="viewLoginRequired($event)"></app-user-projects>
</ng-container>

<ng-container *ngIf="_projectId != null && _userAccessLevel != null">
    <button (click)="viewUserProjects()">Back to all Projects</button>
    <button (click)="refreshProject()">Refresh from Server</button>
    <app-cms-admin
        *ngIf="_userAccessLevel == 1"
        [(projectStructure)]="projectStructure"
        [(projectContent)]="projectContent"
        [projectStructureHistory]="projectStructureHistory"
        [projectContentHistory]="projectContentHistory"
        [(projectSettings)]="projectSettings"
        (adminRequestToSaveStructure)="saveProjectStructure($event)"
        (adminRequestToResetStructure)="resetProjectStructure()"
        (adminRequestToSaveContent)="saveProjectContent($event)"
        (adminRequestToResetContent)="resetProjectContent()"
        (adminRequestToRefreshSettings)="loadProjectSettings()"
        (adminNotifyingOfProjectDeletion)="projectDeleted()">
    </app-cms-admin>
    <app-cms-editor
        *ngIf="_userAccessLevel == 2 || _userAccessLevel > 3"
        [userAccessLevel]="_userAccessLevel"
        [(projectContent)]="projectContent"
        [projectStructure]="projectStructure"
        [(projectSettings)]="projectSettings"
        [customCss]="projectSettings != null ? projectSettings.custom_css : ''"
        (editorRequestToSaveContent)="saveProjectContent($event)"
        (editorRequestToResetContent)="resetProjectContent()"
        (editorRequestToRefreshSettings)="loadProjectSettings()">
    </app-cms-editor>
    <app-cms-view-only
        *ngIf="_userAccessLevel == 3"
        [projectContent]="projectContent"
        [projectStructure]="projectStructure"
        [customCss]="projectSettings != null ? projectSettings.custom_css : ''">
    </app-cms-view-only>
</ng-container>